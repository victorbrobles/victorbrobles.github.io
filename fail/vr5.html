

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Laser Controls</title>
  <meta name="description" content="Laser Controls - A-Frame">
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v4.1.2/dist/aframe-extras.min.js"></script>
</head>

<body>
  <script>

      function getRandomColor() {
        var letters = '0123456789ABCDEF';
        var color = '#';
        for (var i = 0; i < 6; i++) {
          color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
      }

			AFRAME.registerComponent('raycaster-listen', {
				init: function () {
			    this.el.addEventListener('raycaster-intersected', evt => {
			      this.raycaster = evt.detail.el;
			    });
			    this.el.addEventListener('raycaster-intersected-cleared', evt => {
			      this.raycaster = null;
			    });
			  },

			  tick: function () {
			    if (!this.raycaster) { return; }  // Not intersecting.

			    let intersection = this.raycaster.components.raycaster.getIntersection(this.el);
			    if (!intersection) { return; }
			    console.log(intersection.point);
			  }
			});

    </script>
    <a-scene environment="preset: starry; grid: none; groundTexture: walkernoise">
      <a-entity light="type: ambient; color: #CCC"></a-entity>
      <!-- <a-entity id="leftHand" oculus-touch-controls="hand: left" raycaster="objects: .box"></a-entity> -->
      <!-- <a-entity id="rightHand" oculus-touch-controls="hand: right" raycaster="objects: .box"></a-entity> -->
			<a-entity id="rightHand" oculus-touch-controls="hand: right" raycaster="origin:mouse; objects: .box" raycaster-listen></a-entity>

      <a-box class="box" color="red" position="0 -1.6 -10" height="1" width="1"></a-box>
    </a-scene>
</body>
</html>
